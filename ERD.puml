@startuml "HypercertERD"
title "Hypercert ERD"

' Configuration variables
!ifndef SHOW_FIELDS
!define SHOW_FIELDS false
!endif

!if (SHOW_FIELDS == "false")
hide empty fields
!endif
hide empty methods
hide stereotypes

!define REVIEW_COLOR #FFFACD
!define ARROW_COLOR #666666

<style>
document {
    title {
        FontSize 24
        FontStyle bold
    }
}
classDiagram {
    arrow {
        LineColor ARROW_COLOR
        FontColor ARROW_COLOR
        FontSize 10
    }
    .largeBold {
        header {
            FontSize 20
            FontStyle bold
        }
    }
}
</style>

entity contributor #FFD4A3 {
    !if (SHOW_FIELDS == "true")
    DID or name/pseudonym
    !endif
}

dataclass activity <<largeBold>> #B4E5D0 {
    !if (SHOW_FIELDS == "true")
    title
    shortDescription
    description?
    image?
    workScope?
    startDate
    endDate
    contributions[]?
    rights?
    location?
    createdAt
    !endif
}

dataclass evidence {
    !if (SHOW_FIELDS == "true")
    hypercert
    content
    title
    shortDescription?
    description?
    createdAt
    !endif
}

dataclass measurements {
    !if (SHOW_FIELDS == "true")
    hypercert
    measurers[]
    metric
    value
    measurementMethodType
    measurementMethodURI
    evidenceURI[]?
    location?
    createdAt
    !endif
}

dataclass evaluations {
    !if (SHOW_FIELDS == "true")
    subject
    summary
    evaluators[]
    evidence[]?
    measurements[]?
    location?
    createdAt
    !endif
}

dataclass contributions {
    !if (SHOW_FIELDS == "true")
    hypercert
    role?
    contributor[]
    description?
    startDate
    endDate
    createdAt
    !endif
}

dataclass location {
    !if (SHOW_FIELDS == "true")
    lpVersion
    srs
    locationType
    location
    name?
    description?
    createdAt
    !endif
}

dataclass rights {
    !if (SHOW_FIELDS == "true")
    rightsName
    rightsType
    rightsDescription
    attachment
    createdAt
    !endif
}

dataclass collection {
    !if (SHOW_FIELDS == "true")
    title
    shortDescription?
    coverPhoto?
    claims[]
    createdAt
    !endif
}

protocol token <<largeBold>> #FFB6C1 {
    !if (SHOW_FIELDS == "true")
    (on-chain only)
    !endif
}

activity::contributions --> contributions
activity::rights --> rights
activity::location --> location
evidence::hypercert --> activity
measurements::hypercert --> activity
measurements::location --> location
evaluations::evidence --> evidence
evaluations::measurements --> measurements
evaluations::subject --> activity
evaluations::location --> location
collection::claims --> activity
activity <-- token : tokenizes
contributor --> contributions : makes
contributor --> rights : has

@enduml

